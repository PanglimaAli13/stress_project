<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Pengiriman</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="dashboard.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
  <div class="sidebar">
    <div class="logo-details">
        <i class='bx bxl-c-plus-plus icon'></i>
        <div class="logo_name">Dashboard</div>
        <i class='bx bx-menu' id="btn-sidebar-toggle"></i>
    </div>
    <ul class="nav-list">
        <li>
            <a href="dashboard.html" class="active"><i class='bx bx-grid-alt'></i><span class="links_name">Dashboard</span></a>
            <span class="tooltip">Dashboard</span>
        </li>
        <li>
            <a href="profile.html"><i class='bx bx-user'></i><span class="links_name">Profil</span></a>
            <span class="tooltip">Profil</span>
        </li>
        <li>
            <a href="#"><i class='bx bx-cog'></i><span class="links_name">Pengaturan</span></a>
            <span class="tooltip">Pengaturan</span>
        </li>
        <li class="profile">
            <div class="profile-details">
                <img id="profileImg" src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="profileImg">
                <div class="name_job">
                    <div id="profileName" class="name">User</div>
                    <div id="profileRole" class="job">Role</div>
                </div>
            </div>
            <i class='bx bx-log-out' id="logoutBtn" title="Logout"></i>
        </li>
    </ul>
  </div>

  <section class="home-section">
    <div class="dashboard-container">
        <header class="dashboard-header">
            <div class="user-info"><h1>Dashboard Pengiriman</h1><p id="welcomeSubtitle">Selamat datang kembali!</p></div>
            <button id="addShipmentBtn" class="add-btn"><i class='bx bx-plus'></i> Input Shipment Baru</button>
        </header>
        <section class="card-section">
          <div class="card"><h3>Total HK</h3><p id="totalHk">0</p></div>
          <div class="card"><h3>Total DP</h3><p id="totalDp">0</p></div>
          <div class="card"><h3>Terkirim</h3><p id="totalTerkirim">0</p></div>
          <div class="card"><h3>Gagal</h3><p id="totalGagal">0</p></div>
        </section>
        <section class="chart-section">
          <div class="chart-wrapper">
            <div class="chart-container"><h3>Performa Harian Driver</h3><canvas id="dailyPerformanceChart"></canvas></div>
            <div class="chart-container"><h3>Rekap Performa Driver</h3><canvas id="recapPerformanceChart"></canvas></div>
          </div>
        </section>
        <section class="table-section">
          <h3>Data Pengiriman</h3>
          <div class="table-controls">
              <div class="date-filter-group"><label for="startDate">Dari:</label><input type="date" id="startDate" class="date-input"></div>
              <div class="date-filter-group"><label for="endDate">Sampai:</label><input type="date" id="endDate" class="date-input"></div>
              <button id="filterBtn" class="control-btn filter-btn">Filter</button>
              <button id="resetFilterBtn" class="control-btn reset-btn">Reset</button>
          </div>
          <div class="table-wrapper">
            <table id="shipmentTable">
              <thead id="shipmentTableHeader">
                <tr>
                  <th data-column="tanggal">Tanggal <i class='bx bx-sort'></i></th>
                  <th data-column="shipment">Shipment <i class='bx bx-sort'></i></th>
                  <th data-column="jumlahToko">Jml Toko <i class='bx bx-sort'></i></th>
                  <th data-column="terkirim">Terkirim <i class='bx bx-sort'></i></th>
                  <th data-column="gagal">Gagal <i class='bx bx-sort'></i></th>
                  <th>Alasan</th><th>Aksi</th>
                </tr>
              </thead>
              <tbody id="shipmentTableBody"></tbody>
            </table>
          </div>
        </section>
    </div>
  </section>

  <div id="shipmentModal" class="modal-overlay hidden">
    <div class="modal-content">
      <h2 id="modalTitle">Input Shipment Baru</h2>
      <form id="shipmentForm" novalidate>
        <input type="hidden" id="editIndex" />
        <div class="form-group"><label for="namaDriver">Nama Driver</label><input type="text" id="namaDriver" readonly required /></div>
        <div class="form-group"><label for="tanggal">Tanggal Shipment</label><input type="date" id="tanggal" required /></div>
        <div class="form-group">
          <label for="shipment">Nomor Shipment</label>
          <input type="text" id="shipment" required pattern="[0-9]{10}" title="Nomor shipment harus terdiri dari 10 digit angka." maxlength="10" />
        </div>
        <div class="form-row"><div class="form-group"><label for="jumlahToko">Jumlah Toko</label><input type="number" id="jumlahToko" required min="0" /></div><div class="form-group"><label for="terkirim">Terkirim</label><input type="number" id="terkirim" required min="0" /></div></div>
        <div class="form-group"><label for="gagal">Gagal</label><input type="number" id="gagal" readonly required /></div>
        <div id="alasanGroup" class="form-group hidden"><label for="alasan">Alasan Gagal</label><textarea id="alasan" rows="3"></textarea></div>
        <div class="modal-actions"><button type="submit" class="btn-save">Simpan</button><button type="button" id="closeModalBtn" class="btn-close">Tutup</button></div>
      </form>
    </div>
  </div>

  <div id="deleteModal" class="modal-overlay hidden"><div class="modal-content small"><h2 class="modal-title">Konfirmasi Hapus</h2><p class="modal-message">Apakah Anda yakin ingin menghapus data ini?</p><div class="modal-actions"><button id="confirmDeleteBtn" class="btn-danger">Iya, Hapus</button><button id="cancelDeleteBtn" class="btn-secondary">Tidak</button></div></div></div>
  <div id="logoutModal" class="modal-overlay hidden"><div class="modal-content small"><h2 class="modal-title">Konfirmasi Logout</h2><p class="modal-message">Apakah Anda yakin ingin keluar dari sesi ini?</p><div class="modal-actions"><button id="confirmLogoutBtn" class="btn-danger">Logout</button><button id="cancelLogoutBtn" class="btn-secondary">Batal</button></div></div></div>

  <script src="dashboard.js"></script>
</body>
</html>